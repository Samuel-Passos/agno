Aqui estão 10 perguntas onde:
- 3 perguntas funcionam com conhecimento existente
- 4 perguntas produzem artefatos reutilizáveis que valem a pena salvar na KB
- 3 perguntas ficam notavelmente melhores uma vez que esses artefatos existam na KB

==============================
A) 3 perguntas que não precisam de atualizações na KB
==============================

1) Quantos campeonatos cada piloto ganhou?
2) Top 10 pilotos por total de pontos na carreira
3) Qual equipe ganhou mais Campeonatos de Construtores?

==============================
B) 4 perguntas que devem atualizar a base de conhecimento
==============================

4) Pilotos com mais finais de pódio

O que salvar na KB:
- Regra: drivers_championship.position é TEXT, fazer cast com segurança apenas após filtrar valores numéricos
- Padrão: snippet de filtro de posição numérica: position ~ '^[0-9]+$'

5) Mais vitórias em uma única temporada por um piloto

O que salvar na KB:
- Regra: race_wins.date é TEXT e deve ser analisado com TO_DATE(date, 'DD Mon YYYY')
- Padrão: derivação de temporada reutilizável: EXTRACT(YEAR FROM TO_DATE(date, 'DD Mon YYYY'))::INT

6) Comparar o número de vitórias vs posição no campeonato para construtores em um determinado ano

O que salvar na KB:
- Padrão: CTE de vitórias por ano + join de classificações (LEFT JOIN + COALESCE)
- Regra: para joins de nível de temporada com race_wins, sempre fazer join com ano derivado

7) Pilotos que ganharam corridas mas nunca ganharam um campeonato

O que salvar na KB:
- Padrão: padrão anti-join "vitórias mas nunca campeão"
- Nota importante: campeões vêm de drivers_championship WHERE position = '1' (TEXT)

==============================
C) 3 perguntas que usam os artefatos atualizados da KB
==============================

Estas são escolhidas para que o agente recupere e reutilize os padrões e regras salvos.

8) Posição média no campeonato por piloto

Como melhora usando KB:
- Reutiliza a regra de "cast numérico seguro" de #4
- Evita fazer cast de posições não numéricas se existirem

9) Campeões com menos vitórias em sua temporada de campeonato

Como melhora usando KB:
- Reutiliza o padrão de extração de ano de #5
- Reutiliza a regra de segurança de join de #6 (join com escopo de temporada)

10) Campeões geralmente têm mais vitórias naquela temporada?

Como melhora usando KB:
- Reutiliza o scaffold "vitórias vs classificações" de #6
- Reutiliza a regra "join de temporada deve incluir ano derivado" de #5
- Evita o erro clássico de fazer join apenas no nome sem o ano

Se quiser, também posso fornecer:
- os "artefatos KB" exatos que você deve salvar após as perguntas 4–7 (nome, resumo, notas, tags)
- uma ordem de execução recomendada como uma demonstração scriptada (perguntar, consultar, salvar, depois mostrar melhoria)
